# 内容管理模块 - 课程预览、提交审核、课程发布



# 一、课程预览

课程预览就是把课程的相关信息进行整合，在课程预览界面进行展示，课程预览界面与课程发布的课程详情界面一致

![image-20240114145730567](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240114145730567.png)

## 1.1 需求分析

客户可以通过课程预览页面查看信息是否存在问题

如下课程预览的数据来源

![image-20240114144257854](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240114144257854.png)

**下图显示了整个课程预览的流程图**

![image-20240114144459438](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240114144459438.png)



> **也就是说现在怎么给前端返回一个页面呢**？
>
> 最最最原始的JSP可以，一些模板引擎技术也可以
>
> 前端请求内容管理服务后，后台服务系统要返回一个页面
>
> 最终要返回的页面如下图所示（预览页面，如果客户成功确认发布后，发布后的页面和预览时的页面相同）
>
> ![image-20240114144449211](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240114144449211.png)



**说明如下**：

1、点击课程预览，通过Nginx、后台服务网关请求内容管理服务进行课程预览。

2、内容管理服务查询课程相关信息进行整合，并通过模板引擎技术在服务端渲染生成页面，返回给浏览器。

3、通过课程预览页面点击”马上学习“打开视频播放页面。

4、视频播放页面通过Nginx请求后台服务网关，查询课程信息展示课程计划目录，请求媒资服务查询课程计划绑定的视频文件地址，在线浏览播放视频。

> **在这里我们用到了两个技术，一个Nginx，一个freemarker**
>
> **freemarker可以在服务端生成网页然后返回给浏览器**
>
> **Nginx是一个代理服务器，所有的请求都请求到Nginx上，由Nginx进行代理，然后再由Nginx发送到后台服务上**



## 1.2 freemarker 模板引擎

**什么是模板引擎**？

早期采用的jsp技术就是一种模板引擎技术

![image-20240114145255995](https://picture-typora-zhangjingqi.oss-cn-beijing.aliyuncs.com/image-20240114145255995.png)

1、浏览器请求web服务器

2、服务器渲染页面，渲染的过程就是向jsp页面(模板)内填充数据(模型)。

3、服务器将渲染生成的页面返回给浏览器。

所以**模板引擎就是：模板+数据=输出，Jsp页面就是模板，页面中嵌入的jsp标签就是数据，两者相结合输出html网页**



**常用的java模板引擎还有哪些**？

Jsp、Freemarker、Thymeleaf 、Velocity 等。

Freemarker官方地址：http://freemarker.foofun.cn/

> FreeMarker 是一款 *模板引擎*： 即一种**基于模板和要改变的数据， 并用来生成输出文本(HTML网页，电子邮件，配置文件，源代码等)的通用工具**。 它不是面向最终用户的，而是一个Java类库，是一款程序员可以嵌入他们所开发产品的组件。FreeMarker 是免费的， 基于Apache许可证2.0版本发布。









